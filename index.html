<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- SEO 基本 -->
  <title>CORO PROJECT | VTuber事務所公式サイト</title>
  <meta name="description" content="CORO PROJECTはVTuberの発掘・育成・配信支援を行うプロダクションです。最新ニュース、所属タレント情報、オーディションのご案内を掲載しています。">

  <!-- Canonical -->
  <link rel="canonical" href="https://coroproject.jp/">

  <!-- OGP -->
  <meta property="og:site_name" content="CORO PROJECT">
  <meta property="og:type" content="website">
  <meta property="og:title" content="CORO PROJECT | VTuber事務所公式サイト">
  <meta property="og:description" content="CORO PROJECTはVTuberの発掘・育成・配信支援を行うプロダクションです。最新ニュース、所属タレント情報、オーディションのご案内を掲載しています。">
  <meta property="og:url" content="https://coroproject.jp/">
  <meta property="og:image" content="https://coroproject.jp/images/ogp.png">

  <!-- Twitterカード -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="CORO PROJECT | VTuber事務所公式サイト">
  <meta name="twitter:description" content="CORO PROJECTはVTuberの発掘・育成・配信支援を行うプロダクションです。最新ニュース、所属タレント情報、オーディションのご案内を掲載しています。">
  <meta name="twitter:image" content="https://coroproject.jp/images/ogp.png">

  <!-- CSS -->
  <link rel="stylesheet" href="css/styles.css">

  <!-- ✅ ファビコン -->
  <link rel="icon" type="image/png" href="images/logo.png">
  <link rel="apple-touch-icon" href="images/logo.png">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Smartphone redirect (desktop index.html にだけ入れる) -->
  <script>
  (function () {
    // ?desktop=1 で“デスクトップを強制”できるようにする（記憶もする）
    const params = new URLSearchParams(location.search);
    if (params.get('desktop') === '1') {
      try { localStorage.setItem('forceDesktop', '1'); } catch (_) {}
    }
    if (localStorage.getItem('forceDesktop') === '1') return; // 強制時はリダイレクトしない

    // すでに /m/ 配下なら何もしない（ループ防止）
    if (location.pathname.indexOf('/m/') !== -1) return;

    // 画面幅ベースの簡易判定（必要なら閾値を調整：980px=あなたのブレークポイントに合わせてある）
    const isSmall = window.matchMedia('(max-width: 979px)').matches
                || (('ontouchstart' in window) && screen.width <= 820); // 補助的なタッチ端末チェック

    if (isSmall) {
      // 現在のディレクトリを基準に相対パスで /m/ へ（ハッシュは維持）
      var baseDir = location.pathname.replace(/\/[^\/]*$/, '/');
      var dest = baseDir + 'm/index.html' + (location.hash || '');
      location.replace(dest); // 履歴を汚さない
    }
  })();
  </script>
</head>
<body>
<!-- ===== Preloader: ロゴ＆バー ===== -->
<div id="preloader" class="preloader" role="status" aria-live="polite">
  <div class="preloader-inner">
    <img src="images/logo.png" alt="CORO PROJECT" class="preloader-logo">
    <div class="progress" aria-label="読み込み中">
      <span id="bar"></span>
    </div>
    <small style="color:#6b7280">Loading…</small>
  </div>
</div>

  <!-- ===== App（本体） ===== -->
  <div id="app" class="app">
    <!-- ===== Header ===== -->
    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="#">
          <img src="images/toukalogo.png" alt="CORO PROJECT ロゴ" class="brand-logo">
          <span class="brand-text">CORO PROJECT</span>
        </a>
        <!-- モバイル用トグル -->
        <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="siteNav" aria-label="メニューを開く">
          <span></span><span></span><span></span>
        </button>

        <nav class="nav" id="siteNav" aria-label="メインナビゲーション">
          <a href="html/news.html">News</a>
          <a href="html/talents.html">Talents</a>
          <a href="html/audition.html">Audition</a>
          <!-- Contactは専用ページに移行（ヘッダーから外す or 下記で戻してもOK） -->
          <!-- <a href="./contact.html">Contact</a> -->
        </nav>
      </div>
    </header>

    <main>
      <!-- ===== Hero（ファンタジー装飾を“追加”しつつ既存機能は維持） ===== -->
      <section class="hero fantasy-hero">
        <!-- ★ 追加：星空キャンバス / オーロラ / スパークル（装飾） -->
        <canvas class="starfield" aria-hidden="true"></canvas>
        <div class="aurora" aria-hidden="true"></div>
        <div class="sparkles" aria-hidden="true">
          <span></span><span></span><span></span><span></span><span></span>
        </div>

        <!-- 既存：背景プレースホルダ（そのまま維持） -->
        <div class="hero-bg" aria-hidden="true"></div>

        <div class="container hero-inner hero-split">
          <!-- 左：スマホモック＋ショート動画（既存そのまま） -->
          <div class="phone fade-in-up">
            <div class="shorts">
              <div class="shorts-track" id="shortsTrack">
                <!-- 1本目 -->
                <section class="shorts-item">
                  <video playsinline muted preload="auto" class="shorts-video" src="shorts/short1.mp4"></video>
                  <aside class="shorts-ui">
                    <button class="s-btn" aria-label="Like">♡</button><span class="s-num">1.2k</span>
                    <button class="s-btn" aria-label="Comment">💬</button><span class="s-num">128</span>
                    <button class="s-btn" aria-label="Share">↗</button><span class="s-num">Share</span>
                  </aside>
                </section>

                <!-- 2本目 -->
                <section class="shorts-item">
                  <video playsinline muted preload="auto" class="shorts-video" src="shorts/short2.mp4"></video>
                  <aside class="shorts-ui">
                    <button class="s-btn">♡</button><span class="s-num">3.4k</span>
                    <button class="s-btn">💬</button><span class="s-num">89</span>
                    <button class="s-btn">↗</button><span class="s-num">Share</span>
                  </aside>
                </section>

                <!-- 3本目 -->
                <section class="shorts-item">
                  <video playsinline muted preload="auto" class="shorts-video" src="shorts/short3.mp4"></video>
                  <aside class="shorts-ui">
                    <button class="s-btn">♡</button><span class="s-num">987</span>
                    <button class="s-btn">💬</button><span class="s-num">41</span>
                    <button class="s-btn">↗</button><span class="s-num">Share</span>
                  </aside>
                </section>

                <!-- 4本目（任意） -->
                <section class="shorts-item">
                  <video playsinline muted preload="auto" class="shorts-video" src="shorts/short4.mp4"></video>
                  <aside class="shorts-ui">
                    <button class="s-btn">♡</button><span class="s-num">1.1k</span>
                    <button class="s-btn">💬</button><span class="s-num">64</span>
                    <button class="s-btn">↗</button><span class="s-num">Share</span>
                  </aside>
                </section>
              </div>
            </div>
          </div>

          <!-- 右：テキスト（既存の文言そのまま・装飾クラスだけ追加） -->
          <div class="hero-copy fade-in-up">
            <h1 class="hero-title gradient-text">ころぷろじぇくと！</h1>
            <p class="hero-lead">"自分だけでは届かなかった場所へ"</p>
            <div class="hero-actions">
              <a class="btn btn-primary" href="html/audition.html">オーディション</a>
              <a class="btn btn-ghost" href="html/talents.html">タレントを見る</a>
            </div>
          </div>
        </div>

        <!-- ▼ スクロール誘導（PCのみ表示：既存） -->
        <div class="scroll-indicator" aria-hidden="true">
          <span class="scroll-text">SCROLL</span>
          <span class="scroll-arrow"></span>
        </div>

        <!-- ▼ 既存デコに加え、キラ要素と調和するよう微増（既存クラスは維持） -->
        <div class="hero-decor" aria-hidden="true">
          <!-- 小さな星（点） -->
          <span class="dot dot--1"></span>
          <span class="dot dot--2"></span>
          <span class="dot dot--3"></span>
          <span class="dot dot--4"></span>
          <span class="dot dot--5"></span>
          <span class="dot dot--6"></span>
          <span class="dot dot--7"></span>

          <!-- 幾何（正方形/三角形/丸） -->
          <span class="geo geo-square geo--a"></span>
          <span class="geo geo-tri    geo--b"></span>
          <span class="geo geo-circle geo--c"></span>
          <span class="geo geo--triangle-4"></span>
          <span class="geo geo--triangle-5"></span>
          <span class="geo geo--square-4"></span>
          <span class="geo geo--square-5"></span>

          <!-- 流れ星 -->
          <span class="meteor meteor--1"></span>
          <span class="meteor meteor--2"></span>
          <span class="meteor meteor--3"></span>
        </div>

        <!-- Hero 内のSNSアイコン（既存） -->
        <div class="hero-social" aria-label="Official links">
          <a href="https://x.com/CoroProject0111" target="_blank" aria-label="X (Twitter)">
            <i class="fab fa-x-twitter" aria-hidden="true"></i>
          </a>
          <a href="https://youtube.com/@YourChannel" target="_blank" aria-label="YouTube">
            <i class="fab fa-youtube" aria-hidden="true"></i>
          </a>
          <a href="/html/contact.html" target="_blank" rel="noopener" aria-label="Mail">
            <i class="fas fa-envelope" aria-hidden="true"></i>
          </a>        
        </div>

        <!-- ★ 追加：下端の波形でセクション区切り -->
        <div class="wave-divider" aria-hidden="true">
          <svg viewBox="0 0 1440 140" preserveAspectRatio="none">
            <path d="M0,80 C240,140 480,0 720,60 C960,120 1200,40 1440,80 L1440,160 L0,160 Z" fill="var(--c-bg)"/>
          </svg>
        </div>
      </section>
      
      <!-- ===== About / Company Statement ===== -->
      <section id="about" class="section about fantasy-section section-alt">
        <!-- 上端の淡い波（デコ、機能影響なし） -->
        <div class="wave-divider wave-divider--top" aria-hidden="true">
          <svg viewBox="0 0 1440 140" preserveAspectRatio="none">
            <path d="M0,100 C240,40 480,160 720,80 C960,0 1200,120 1440,60 L1440,-20 L0,-20 Z" fill="var(--c-sub)"/>
          </svg>
        </div>

        <div class="container">
          <div class="about-card">
            <div class="about-grid">
              <!-- 左：大見出し＆コピー -->
              <div class="about-left fade-in-up">
                <span class="about-eyebrow" aria-hidden="true"></span>
                <h2 class="about-title gradient-text">Your Stream,<br>Your Story.</h2>
                <p class="about-copy-ja">
                  あなたにしかできない配信を、<br>
                  あなた自身の力で。
                </p>
              </div>

              <!-- 右：企業説明テキスト -->
              <div class="about-right fade-in-up">
                <p>
                  CORO PROJECTは、配信者一人ひとりの<strong>「らしさ」</strong>を尊重するVTuberプロダクションです。<br>
                  私たちは派手な演出や型にはまった活動だけを求めるのではなく、<br>
                  その人にしかできない表現や物語を中心に据えています。
                </p>
                <p>
                  活動のサポートは徹底的に行います。企画の立案や配信環境の整備、<br>
                  デザインや技術面のクリエイティブ支援、ファンとのコミュニティ形成。<br>
                  それらを「事務所の色」に押し込めるのではなく、<br>
                  あくまで配信者自身が自由に選び、自分の声で発信できるように伴走します。
                </p>
                <p>
                  私たちが大切にしているのは、<br>
                  <em>「自分らしいスタイルで続けられること」</em>と<br>
                  <em>「視聴者と一緒に成長していけること」</em>。<br>
                  その小さな積み重ねこそが、唯一無二の存在感を生み出すと信じています。
                </p>
                <p class="about-cta-note">
                  <strong>CORO PROJECT</strong> は、あなたの表現が「特別」になる瞬間を支える場所。<br>
                  配信も、作品も、ファンとの時間も――すべてがあなたの物語です。
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== News ===== -->
      <section id="news" class="section fantasy-section">
        <div class="container">
          <div class="section-head">
            <h2 class="section-title gradient-text">News</h2>
            <a class="section-more" href="html/news.html">すべて見る →</a>
          </div>

          <div class="grid grid-3">
            <article class="card fancy-card fade-in-up">
              <a class="card-body" href="#">
                <div class="card-thumb" aria-hidden="true"></div>
                <div class="card-meta">
                  <time datetime="2025-08-20">2025.10.04</time>
                  <span class="tag">お知らせ</span>
                </div>
                <h3 class="card-title">新規タレント募集 第一期 開始</h3>
                <p class="card-text">応募要項やスケジュールをご確認ください。エントリーは特設ページより。</p>
              </a>
            </article>

            <article class="card fancy-card fade-in-up" style="--delay:.06s">
              <a class="card-body" href="#">
                <div class="card-thumb" aria-hidden="true"></div>
                <div class="card-meta">
                  <time datetime="2025-08-10">2025.10.04</time>
                  <span class="tag">リリース</span>
                </div>
                <h3 class="card-title">公式サイト公開のお知らせ</h3>
                <p class="card-text">CORO PROJECTの公式サイトを公開しました。最新情報を発信していきます。</p>
              </a>
            </article>

            <article class="card fancy-card fade-in-up" style="--delay:.12s">
              <a class="card-body" href="#">
                <div class="card-thumb" aria-hidden="true"></div>
                <div class="card-meta">
                  <time datetime="2025-08-01">2025.10.04</time>
                  <span class="tag">リリース</span>
                </div>
                <h3 class="card-title">公式Xアカウント開設のおしらせ</h3>
                <p class="card-text">CORO PROJECTの公式Xを公開しました。最新情報ほかストリーマーの活動などを随時発信していきます。</p>
              </a>
            </article>
          </div>
        </div>
      </section>

      <!-- ===== Talents（2人の16:9自己紹介プレート・スライダー） ===== -->
      <section id="talents" class="section section-alt fantasy-section">
        <div class="container">
          <div class="section-head">
            <h2 class="section-title gradient-text">Talents</h2>
            <a class="section-more" href="html/talents.html">一覧を見る →</a>
          </div>

          <div class="talent-slider" aria-roledescription="carousel">
            <div class="talent-viewport">
              <div class="talent-slides" id="talentSlides">
                <!-- Slide 1（テスト画像：埋め込みSVG） -->
                <div class="talent-slide" aria-label="Member 1">
                  <img alt="Member 1 placeholder" src="data:image/svg+xml;utf8,<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'><defs><linearGradient id='g1' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='%236b5cff'/><stop offset='100%' stop-color='%2306b6d4'/></linearGradient></defs><rect width='1600' height='900' fill='url(%23g1)'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Inter,Segoe UI,Arial' font-size='96' fill='white' opacity='0.92'>Member A — 16:9</text><text x='50%' y='62%' dominant-baseline='middle' text-anchor='middle' font-family='Inter,Segoe UI,Arial' font-size='40' fill='white' opacity='0.9'>Self-intro plate (test image)</text></svg>">
                  <div class="talent-caption">Member A / YouTube・X</div>
                </div>

                <!-- Slide 2（テスト画像：埋め込みSVG） -->
                <div class="talent-slide" aria-label="Member 2">
                  <img alt="Member 2 placeholder" src="data:image/svg+xml;utf8,<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'><defs><linearGradient id='g2' x1='1' y1='0' x2='0' y2='1'><stop offset='0%' stop-color='%2306b6d4'/><stop offset='100%' stop-color='%236b5cff'/></linearGradient></defs><rect width='1600' height='900' fill='url(%23g2)'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Inter,Segoe UI,Arial' font-size='96' fill='white' opacity='0.92'>Member B — 16:9</text><text x='50%' y='62%' dominant-baseline='middle' text-anchor='middle' font-family='Inter,Segoe UI,Arial' font-size='40' fill='white' opacity='0.9'>Self-intro plate (test image)</text></svg>">
                  <div class="talent-caption">Member B / Twitch・X</div>
                </div>
              </div>

              <!-- controls -->
              <div class="slider-controls">
                <button class="slider-btn" id="prevBtn" aria-label="前へ">‹</button>
                <button class="slider-btn" id="nextBtn" aria-label="次へ">›</button>
              </div>
              <div class="slider-dots">
                <div class="slider-dot is-active" data-index="0" aria-label="1枚目"></div>
                <div class="slider-dot" data-index="1" aria-label="2枚目"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== Audition CTA ===== -->
      <section id="audition" class="section cta fantasy-section">
        <div class="container cta-inner">
          <div class="cta-copy">
            <h2 class="gradient-text">Audition</h2>
            <p>"自分だけでは届かなかった場所へ"</p>
          </div>
          <div class="cta-actions">
            <a class="btn btn-primary btn-lg" href="html/audition.html">応募する</a>
            <a class="btn btn-ghost btn-lg" href="html/audition.html#requirements">要項を読む</a>
          </div>
        </div>
      </section>
    </main>

    <!-- ===== Footer ===== -->
    <footer class="site-footer">
      <div class="container footer-inner">
        <div class="footer-col">
          <div class="brand brand--footer">
            <img src="images/logo.png" alt="CORO PROJECT" class="footer-logo">
            <span class="brand-text">CORO PROJECT</span>
          </div>
          <p class="footer-desc">CORO PROJECTはVTuberのプロデュース・配信支援を行うプロダクションです。</p>

          <!-- ★ 問い合わせボタン（専用ページへ） -->
          <div class="footer-actions">
            <a class="btn btn-primary" href="html/contact.html">問い合わせ</a>
          </div>
        </div>

        <div class="footer-col">
          <h4>Links</h4>
          <ul class="footer-links">
            <li><a href="html/news.html">News</a></li>
            <li><a href="html/talents.html">Talents</a></li>
            <li><a href="html/audition.html">Audition</a></li>
            <li><a href="html/privacy.html">Privacy Policy</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Social</h4>
          <ul class="footer-links">
            <li><a href="#">YouTube</a></li>
            <li><a href="https://x.com/CoroProject0111">X</a></li>
            <li><a href="#">Twitch</a></li>
          </ul>
        </div>
      </div>

      <div class="container footer-copy">
        <small>© <span id="year"></span> CORO PROJECT</small>
      </div>
    </footer>
  </div> <!-- /#app -->

  <!-- ===== Scripts ===== -->
  <script>
    // 年号
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Mobile Nav toggle =====
    (function(){
      const btn = document.getElementById('navToggle');
      const nav = document.getElementById('siteNav');
      if(!btn || !nav) return;
      btn.addEventListener('click', ()=>{
        const opened = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!opened));
        document.body.classList.toggle('nav-open', !opened);
      });
      window.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape' && document.body.classList.contains('nav-open')){
          btn.setAttribute('aria-expanded','false');
          document.body.classList.remove('nav-open');
        }
      });
    })();

    // ===== Preloader: “リアル”なバー + 本体1.5sフェード =====
    (function(){
      const loader = document.getElementById('preloader');
      const bar = document.getElementById('bar');
      const app = document.getElementById('app');

      // Tuning
      const MIN_VISIBLE = 1100;         // 最低表示時間(ms)
      const MAX_FAKE_BEFORE_LOAD = 92;  // 実ロード前の上限(%)
      const STALL_PROB = 0.18;          // 小休止確率
      const BURST_PROB = 0.12;          // 急伸確率
      const STALL_MS = [120, 520];      // 小休止長さ
      const BURST_DELTA = [0.8, 2.2];   // 急伸量(%)
      const BASE_STEP = [0.12, 0.55];   // 通常前進幅レンジ(%)
      const TICK_MS = [80, 260];        // ティック間隔

      bar.style.transition = 'width 140ms steps(6, end)';

      const start = performance.now();
      let p = 0, stallingUntil = 0, loaded = false;

      const lerp = (a,b,t)=>a+(b-a)*t;
      const rand = (min,max)=>min+Math.random()*(max-min);
      const scheduleNext = ()=> setTimeout(tick, rand(TICK_MS[0], TICK_MS[1]));

      function tick(){
        const now = performance.now();

        if (!loaded || (now - start) < MIN_VISIBLE){
          if (now >= stallingUntil && Math.random() < STALL_PROB){
            stallingUntil = now + rand(STALL_MS[0], STALL_MS[1]);
          }
          if (now < stallingUntil){
            p += rand(0, 0.08); // 微動
          } else {
            const t = Math.min(1, p / 100);
            const base = lerp(BASE_STEP[1], BASE_STEP[0], t); // 終盤ほど減速
            p += rand(0, base);
            if (Math.random() < BURST_PROB) p += rand(BURST_DELTA[0], BURST_DELTA[1]);
          }
          if (!loaded) p = Math.min(p, MAX_FAKE_BEFORE_LOAD);
          bar.style.width = Math.max(0, Math.min(100, p)) + '%';
          return scheduleNext();
        }

        // 完了 → 100% → ローダー消しつつ本体を表示
        bar.style.transition = 'width 160ms steps(5, end)';
        p = 100; bar.style.width = '100%';

        setTimeout(() => {
          loader.classList.add('hidden'); // ローダーをフェードアウト
          app.classList.add('visible');   // 本体を1.5sでフェードイン（CSS）
          document.documentElement.classList.add('page-ready');
          setTimeout(() => loader.remove(), 400);
        }, 240);
      }

      function finish(){
        if (loaded) return;
        loaded = true;
        const elapsed = performance.now() - start;
        const remain = Math.max(0, MIN_VISIBLE - elapsed);
        setTimeout(tick, remain);
      }

      window.addEventListener('load', finish);
      setTimeout(finish, 10000); // フェイルセーフ
      scheduleNext();
    })();

    // ===== Talent Slider（自動スライド + ボタン/ドット） =====
    (function(){
      const slides = document.getElementById('talentSlides');
      if(!slides) return;
      const dots = Array.from(document.querySelectorAll('.slider-dot'));
      const prev = document.getElementById('prevBtn');
      const next = document.getElementById('nextBtn');

      const NUM = 2;
      let index = 0;
      let timer = null;
      const INTERVAL = 4000; // 自動スライド間隔

      function go(to){
        index = (to + NUM) % NUM;
        slides.style.transform = `translateX(-${index * 100}%)`;
        dots.forEach((d,i)=>d.classList.toggle('is-active', i===index));
        restart();
      }
      function restart(){
        clearTimeout(timer);
        timer = setTimeout(()=>go(index+1), INTERVAL);
      }
      dots.forEach(d=>d.addEventListener('click', ()=>go(Number(d.dataset.index))));
      prev && prev.addEventListener('click', ()=>go(index-1));
      next && next.addEventListener('click', ()=>go(index+1));

      // 初期スタート
      restart();
    })();

    // スクロール位置の制御（既存）
    (function () {
      if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
      }
      // 一瞬でもズレないよう、最初に即座に戻す
      const html = document.documentElement;
      const prev = html.style.scrollBehavior || '';
      html.style.scrollBehavior = 'auto';   // smooth を一旦OFF
      window.scrollTo(0, 0);

      // 画像やフォント読み込み完了後にもう一度0に固定→挙動を戻す
      window.addEventListener('load', () => {
        window.scrollTo(0, 0);
        html.style.scrollBehavior = prev;   // 元の smooth 設定に戻す
      }, { once: true });
    })();

    // Shorts（縦動画オート）— 既存
    (function(){
      const track = document.getElementById('shortsTrack');
      if(!track) return;

      const items  = Array.from(track.querySelectorAll('.shorts-item'));
      const videos = items.map(it => it.querySelector('video'));
      const DURATION = 10000; // 10秒ごと
      let index = 0, timer;

      function show(n){
        index = (n + items.length) % items.length;
        track.style.transform = `translateY(-${index * 100}%)`;

        videos.forEach((v,i)=>{
          if(i === index){
            try { v.currentTime = 0; v.play(); } catch(e){}
          }else{
            try { v.pause(); } catch(e){}
          }
        });
      }

      // 自動送り
      function start(){ stop(); timer = setInterval(()=>show(index+1), DURATION); }
      function stop(){ if(timer) clearInterval(timer); }

      // 初期表示
      show(0); start();

      // ページのタブ切替で無駄に回らないように
      document.addEventListener('visibilitychange', ()=>{
        if(document.hidden) stop(); else start();
      });

      // クリックで一時停止/再開（仕様そのまま）
      track.addEventListener('click', ()=>{
        if(timer){ stop(); } else { start(); }
      });
    })();

    // Aboutカードのスクロール発火（既存）
    (function(){
      const el = document.querySelector('.about-card');
      if (!el) return;

      // すでに見えているかを判定（フォールバック用）
      function inView(node){
        const r = node.getBoundingClientRect();
        const vh = window.innerHeight || document.documentElement.clientHeight;
        // 画面の15%〜85%の帯に少しでも重なったら「見えた」とみなす
        return (r.top < vh * 0.85) && (r.bottom > vh * 0.15);
      }
      function revealOnce(){
        if (inView(el)) {
          el.classList.add('in');
          window.removeEventListener('scroll', revealOnce);
          window.removeEventListener('resize', revealOnce);
        }
      }

      if ('IntersectionObserver' in window) {
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(e=>{
            if (e.isIntersecting) {
              el.classList.add('in');
              io.unobserve(el); // 一度だけ
            }
          });
        }, {
          root: null,
          // 画面下側を15%ほど“早めに”切り上げて発火しやすく
          rootMargin: '0px 0px -35% 0px',
          threshold: 0.45
        });
        io.observe(el);

        // 既に見えているケースにも対応
        window.addEventListener('load', ()=> {
          if (inView(el)) el.classList.add('in');
        }, { once:true });

      } else {
        // IO 非対応のフォールバック
        window.addEventListener('scroll', revealOnce, { passive:true });
        window.addEventListener('resize', revealOnce);
        window.addEventListener('load', revealOnce, { once:true });
        revealOnce(); // 初回判定
      }
    })();

    // ★ 追加：スクロール時のフェードアップ適用（汎用）
    (function(){
      if (!('IntersectionObserver' in window)) return;
      const io = new IntersectionObserver((entries,obs)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ e.target.classList.add('in-view'); obs.unobserve(e.target); }
        });
      }, { rootMargin: '0px 0px -8% 0px', threshold: .12 });
      document.querySelectorAll('.fade-in-up').forEach(el=> io.observe(el));
    })();

    // ★ 追加：星空のゆるアニメ（CSS不要のCanvas）
    (function(){
      const c = document.querySelector('.fantasy-hero .starfield');
      if(!c) return;
      const ctx = c.getContext('2d',{alpha:true});
      let W, H, stars=[];

      function resize(){
        const dpr = Math.max(1, window.devicePixelRatio || 1);
        c.width  = Math.floor(c.clientWidth  * dpr);
        c.height = Math.floor(c.clientHeight * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0);
        W = c.clientWidth; H = c.clientHeight;
        const count = Math.floor((W*H)/9000);
        stars = Array.from({length: count}, ()=>({
          x: Math.random()*W,
          y: Math.random()*H,
          r: Math.random()*1.6 + .2,
          a: Math.random()*1,
          s: Math.random()*0.6 + 0.2
        }));
      }
      function draw(){
        ctx.clearRect(0,0,W,H);
        for(const st of stars){
          st.a += (Math.random()-.5)*0.06;
          st.a = Math.max(0.15, Math.min(1, st.a));
          ctx.globalAlpha = st.a;
          ctx.fillStyle = '#fff';
          ctx.beginPath(); ctx.arc(st.x, st.y, st.r, 0, Math.PI*2); ctx.fill();
          st.x += st.s*0.06; if(st.x > W+4) st.x = -4;
        }
        requestAnimationFrame(draw);
      }
      const ro = new ResizeObserver(resize); ro.observe(c);
      resize(); draw();
    })();

    // ★ 追加：軽いパララックス（ポインタ移動時にオーロラをふわっと）
    (function(){
      const hero = document.querySelector('.fantasy-hero');
      if(!hero) return;
      const aurora = hero.querySelector('.aurora');
      let raf = null;
      hero.addEventListener('pointermove', (e)=>{
        if(!aurora) return;
        if(raf) cancelAnimationFrame(raf);
        raf = requestAnimationFrame(()=>{
          const r = hero.getBoundingClientRect();
          const rx = (e.clientX - r.left) / r.width - .5;
          const ry = (e.clientY - r.top) / r.height - .5;
          aurora.style.transform = `translate(${rx*8}px, ${ry*8}px)`;
        });
      });
    })();
  </script>
</body>
</html>
